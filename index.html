<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Cred — Launching Soon</title>
  <meta name="description" content="Cred measures the credibility of public voices. Pre-order early access." />
  <link rel="icon" type="image/png" href="images/favicon.png"/>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Nunito+Sans:wght@400;600&display=swap" rel="stylesheet"/>

  <!-- Styles -->
  <link rel="stylesheet" href="css/styles.css"/>
</head>
<body>

  <!-- ===== Header ===== -->
  <header class="header">
    <div class="header-left">
      <a class="logo" href="#top" aria-label="Cred home">
        <img src="images/cred-nav-logo.png" alt="Cred logo" class="logo-img" />
      </a>

      <button class="menu-btn" aria-controls="site-nav" aria-expanded="false" aria-label="Open menu">
        <span>Menu</span>
      </button>

      <!-- LEFT NAV -->
      <nav id="site-nav" class="nav nav-left" aria-label="Primary">
        <a href="#top">Home</a>
        <a href="#contact" class="btn btn-ghost contact-link">Contact</a>
      </nav>
    </div>

    <!-- FAR RIGHT CTA -->
    <div class="header-right">
      <a href="#" id="preorderNav" class="btn btn-accent btn-lg">Pre-Order Now</a>
    </div>
  </header>

  <!-- ===== Hero ===== -->
  <main id="top" class="hero" role="main">
    <div class="hero-inner">
      <div class="hero-copy">
        <h1 class="title">Cred</h1>
        <p class="tagline">We measure the credibility of public voices—so you know who to trust.</p>
        <div class="cta">
          <a href="#" id="preorderCta" class="btn btn-primary btn-lg">Pre-Order Now</a>
          <span class="note">Limited early access</span>
        </div>
      </div>

      <!-- ===== HERO PHONE — video demo ===== -->
      <div class="phone demo" aria-label="App demo">
        <div class="demo-stage" id="demoStage" aria-hidden="false">
          <!-- IMPORTANT: provide MP4 (H.264) fallback for iOS + WebM for others -->
          <video
            id="demoVideo"
            class="demo-frame active"
            poster="images/app1.png"
            preload="metadata"
            muted
            autoplay
            loop
            playsinline
            webkit-playsinline
          >
            <source src="images/demo-video1.mp4" type="video/mp4" />
            <source src="images/demo-video1.webm" type="video/webm" />
            Your browser does not support the video tag.
          </video>
        </div>

        <!-- BOTTOM caption/help text -->
        <div class="demo-ui">
          <div class="demo-caption" id="demoCaption">Cred — quick tour</div>
        </div>
      </div>
    </div>
    <div class="scroll-hint">Scroll</div>
  </main>

  <!-- ===== Content Section (optional sample) ===== -->
  <section class="section" id="contact">
    <div class="container center">
      <h2 class="h2">Stay in the loop</h2>
      <p class="lead">Want early access? Ping us and we’ll reach out with next steps.</p>
      <form class="contact-form mt-32" action="mailto:thecredapp@gmail.com" method="post" enctype="text/plain">
        <div class="form-row">
          <input type="text" name="name" placeholder="Your name" aria-label="Your name" />
          <input type="email" name="email" placeholder="Your email" aria-label="Your email" />
        </div>
        <textarea name="message" rows="4" placeholder="Message" class="mt-16" aria-label="Message"></textarea>
        <div class="mt-16">
          <button class="btn btn-primary">Send</button>
        </div>
      </form>
    </div>
  </section>

  <!-- ===== Footer ===== -->
  <footer class="footer">
    <div class="container footer-inner">
      <div class="footer-left">
        <img src="images/cred-nav-logo.png" alt="Cred logo" class="logo-img" />
        <span>&copy; <span id="year"></span> Cred</span>
      </div>
      <nav class="footer-nav" aria-label="Footer">
        <a href="#top">Home</a>
        <a href="#contact">Contact</a>
      </nav>
    </div>
  </footer>

  <!-- ===== Scripts ===== -->
  <script>
    // --- Year ---
    const yearEl = document.getElementById('year');
    if (yearEl) yearEl.textContent = new Date().getFullYear();

    // --- Mobile menu toggle ---
    const menuBtn = document.querySelector('.menu-btn');
    const nav = document.getElementById('site-nav');
    menuBtn?.addEventListener('click', () => {
      const open = nav.classList.toggle('open');
      menuBtn.setAttribute('aria-expanded', open ? 'true' : 'false');
    });
    nav?.addEventListener('click', (e) => {
      if (e.target.tagName === 'A' && nav.classList.contains('open')) {
        nav.classList.remove('open');
        menuBtn.setAttribute('aria-expanded','false');
      }
    });

    // --- Pre-order click-through (replace with checkout URL when ready) ---
    const PREORDER_URL = '#';
    ['preorderCta','preorderNav']
      .map(id => document.getElementById(id)).filter(Boolean)
      .forEach(el => el.addEventListener('click', (e) => {
        e.preventDefault();
        if (PREORDER_URL === '#') {
          window.location.href = 'mailto:thecredapp@gmail.com?subject=Pre-Order%20Cred&body=Hi%20Cred%20team%2C%0A%0AI%27d%20like%20to%20pre-order%20early%20access.%20Please%20send%20details.%0A%0AThanks!';
        } else {
          window.location.href = PREORDER_URL;
        }
      }));

    // --- Video handling: play/pause based on visibility + mobile autoplay kick ---
    (function(){
      const phone = document.querySelector('.phone.demo');
      const video = document.getElementById('demoVideo');
      if (!video) return;

      // Ensure correct flags for autoplay inline on iOS
      video.muted = true;
      video.setAttribute('playsinline', '');
      video.setAttribute('webkit-playsinline', '');

      // Try to play on load
      const tryPlay = () => video.play().catch(() => {});
      document.addEventListener('DOMContentLoaded', tryPlay);
      // Some mobile browsers need a user gesture once
      const gestureKick = () => { tryPlay(); document.removeEventListener('touchstart', gestureKick); document.removeEventListener('click', gestureKick); };
      document.addEventListener('touchstart', gestureKick, { passive: true });
      document.addEventListener('click', gestureKick);

      // Pause when offscreen for perf
      if ('IntersectionObserver' in window && phone) {
        const io = new IntersectionObserver(entries=>{
          entries.forEach(e=>{
            if (e.isIntersecting) {
              tryPlay();
            } else {
              video.pause();
            }
          });
        }, { threshold: 0.35 });
        io.observe(phone);
      }

      // Also pause when tab hidden
      document.addEventListener('visibilitychange', () => {
        if (document.hidden) video.pause(); else tryPlay();
      });
    })();
  </script>
</body>
</html>
